"use strict";(self["webpackChunkwsgbrand_app_v1"]=self["webpackChunkwsgbrand_app_v1"]||[]).push([[9524],{9812:function(t,e,s){s.d(e,{c:function(){return L}});var a=s(4108),i=s(9096);const n={key:0,class:"w-100"},l={class:"d-flex"},d=["src","data-bs-url"],c={class:"flex-fill d-flex flex-column justify-content-between"},o=["data-bs-dispatch-sid"],r={class:"d-flex justify-content-between fw-bold"},f={class:"fw-bold"},p={key:0,class:"d-flex"},u=(0,a.QD)("span",{class:"me-1"},"Note:",-1),b={class:"me-2"},h={class:"btn-group d-flex"},m=(0,a.QD)("i",{class:"bi bi-chevron-left"},null,-1),v=(0,a.QD)("span",{class:"ps-2"},"Ledger",-1),D=["data-bs-dispatch-sid"],g=(0,a.QD)("span",{class:"pe-2"},"Bill",-1),y=(0,a.QD)("i",{class:"bi bi-chevron-right"},null,-1),x={key:1,class:"flex-fill d-flex"},Q=["data-bs-dispatch-sid"],w=(0,a.QD)("span",{class:"fw-500 pe-2"},"Stock In",-1),A=(0,a.QD)("i",{class:"bi bi-chevron-down"},null,-1),k=[w,A],W={key:1,class:"btn btn-sm btn-outline-dark flex-fill rounded-0 border-secondary border-end-0 p-0"},_={key:0,class:"d-flex justify-content-center text-bg-warning p-1"},z=(0,a.QD)("span",{class:"fw-500 pe-2"},"Bill Pending",-1),I=(0,a.QD)("i",{class:"bi bi-hourglass-split"},null,-1),M=[z,I],q={key:1,class:"d-flex justify-content-center text-bg-success p-1"},j=(0,a.QD)("span",{class:"fw-500 pe-2"},"Billed",-1),O=(0,a.QD)("i",{class:"bi bi-check-circle-fill"},null,-1),S=[j,O];function $(t,e,s,w,A,z){const I=(0,a.E1)("router-link");return s.dispatch&&s.dispatch.items&&Object.entries(s.dispatch.items).length?((0,a.Wz)(),(0,a.An)("div",n,[(0,a.QD)("div",l,[(0,a.QD)("img",{src:s.dispatch.image,class:"of-cover w-80p","data-bs-toggle":"modal","data-bs-target":"#imagePreviewModal","data-bs-url":s.dispatch.preview},null,8,d),(0,a.QD)("div",c,[(0,a.QD)("div",{class:"flex-fill p-2","data-bs-toggle":"offcanvas","data-bs-target":"#dispatchOrderModal","data-bs-dispatch-sid":s.dispatch.sid,"aria-controls":"dispatchOrderModal"},[(0,a.QD)("div",r,[(0,a.QD)("span",null,(0,i.WA)(s.dispatch.product_code)+" | "+(0,i.WA)(s.dispatch.product_name),1),(0,a.QD)("span",f,(0,i.WA)(s.dispatch.quantity.toLocaleString())+" pcs",1)]),s.dispatch.note&&s.dispatch.note.length?((0,a.Wz)(),(0,a.An)("div",p,[u,((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(s.dispatch.note,((t,e)=>((0,a.Wz)(),(0,a.An)("div",{class:"d-flex",key:e},[(0,a.QD)("span",b,(0,i.WA)(t.content),1)])))),128))])):(0,a.g1)("",!0)],8,o),(0,a.QD)("div",h,[(0,a.K2)(I,{to:{name:"FactoryLedgerDetail",params:{ledger:s.dispatch.ledger_sid}},class:"btn btn-sm btn-outline-dark flex-fill rounded-0 border-secondary border-start-0"},{default:(0,a.Ql)((()=>[m,v])),_:1},8,["to"]),(0,a.QD)("button",{class:"btn btn-sm btn-outline-dark flex-fill rounded-0 border-secondary","data-bs-toggle":"offcanvas","data-bs-target":"#dispatchOrderModal","data-bs-dispatch-sid":s.dispatch.sid,"aria-controls":"dispatchOrderModal"}," Show Details ",8,D),s.dispatch.is_billed?((0,a.Wz)(),(0,a.Az)(I,{key:0,to:{name:"FactoryLedgerDetail",params:{ledger:s.dispatch.ledger_sid}},class:"btn btn-sm btn-outline-dark flex-fill rounded-0 border-secondary border-end-0"},{default:(0,a.Ql)((()=>[g,y])),_:1},8,["to"])):((0,a.Wz)(),(0,a.An)("div",x,[z.isBrand&&"pending"===s.dispatch.status?((0,a.Wz)(),(0,a.An)("button",{key:0,class:"btn btn-sm btn-outline-dark flex-fill rounded-0 border-start-0 border-secondary","data-bs-toggle":"offcanvas","data-bs-target":"#dispatchStockInModal","data-bs-dispatch-sid":s.dispatch.sid,"aria-controls":"dispatchStockInModal"},k,8,Q)):((0,a.Wz)(),(0,a.An)("div",W,["pending"===s.dispatch.status?((0,a.Wz)(),(0,a.An)("div",_,M)):((0,a.Wz)(),(0,a.An)("div",q,S))]))]))])])])])):(0,a.g1)("",!0)}var P={name:"DispatchCard",props:["dispatch"],data(){return{error:"",message:""}},computed:{isBrand(){return"brand"===this.$store.getters["authy/getPrefix"]},isParty(){return"brand"!==this.$store.getters["authy/getPrefix"]}},methods:{dispatchAction(t,e){this.$store.dispatch("dispatchAction",{status:e,sid:t.sid,message:this.message,expected_at:t.expected_at})}}},C=s(4100);const E=(0,C.c)(P,[["render",$]]);var L=E},8328:function(t,e,s){s.d(e,{c:function(){return A}});var a=s(4108),i=s(9096);const n={key:0,class:"offcanvas offcanvas-bottom h-75",tabindex:"-1",id:"dispatchOrderModal","aria-labelledby":"dispatchOrderModalLabel"},l={class:"offcanvas-header border-bottom"},d={key:0,class:"offcanvas-title fw-bold ls-1 font-title"},c=(0,a.QD)("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"},null,-1),o={class:"offcanvas-body p-2"},r=["src","data-bs-url"],f={class:"flex-fill d-flex flex-column p-2"},p={class:"d-flex justify-content-between"},u={class:"text-capitalize fw-500"},b={class:"fw-bold"},h={key:0,class:"fw-bold"},m=(0,a.QD)("hr",{class:"my-2"},null,-1),v={class:"small fw-500"},D={class:"small fw-500"},g={key:0,class:"small fw-500"};function y(t,e,s,y,x,Q){return x.activeDispatch?((0,a.Wz)(),(0,a.An)("div",n,[(0,a.QD)("div",l,[x.activeDispatch.party&&x.activeDispatch.party.name?((0,a.Wz)(),(0,a.An)("div",d,(0,i.WA)(x.activeDispatch.party.name),1)):(0,a.g1)("",!0),c]),(0,a.QD)("div",o,[((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(x.activeDispatch.items,((t,e)=>((0,a.Wz)(),(0,a.An)("div",{key:e,class:"d-flex mb-2"},[(0,a.QD)("img",{src:t.image,class:"of-cover w-70p","data-bs-toggle":"modal","data-bs-target":"#imagePreviewModal","data-bs-url":t.preview},null,8,r),(0,a.QD)("div",f,[(0,a.QD)("div",p,[(0,a.QD)("span",u,(0,i.WA)(t.option),1),(0,a.QD)("span",b,(0,i.WA)(t.quantity)+" pcs.",1),t.is_billed?((0,a.Wz)(),(0,a.An)("span",h,(0,i.WA)(t.diffrence)+" pcs.",1)):(0,a.g1)("",!0)]),m,((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(t.ranges,((e,s)=>((0,a.Wz)(),(0,a.An)("div",{class:"d-flex justify-content-between w-50",key:s},[(0,a.QD)("span",v,(0,i.WA)(e.range),1),(0,a.QD)("span",D,(0,i.WA)(e.quantity)+" "+(0,i.WA)(e.quantity?"pcs.":"Nil"),1),t.is_billed?((0,a.Wz)(),(0,a.An)("span",g,(0,i.WA)(e.diffrence)+" "+(0,i.WA)(e.diffrence?"pcs.":"Nil"),1)):(0,a.g1)("",!0)])))),128))])])))),128))])])):(0,a.g1)("",!0)}var x={name:"DispatchDetails",props:["dispatches"],data(){return{activeDispatch:{}}},async mounted(){this.loadActiveSale()},methods:{loadActiveSale(){const t=document.getElementById("dispatchOrderModal");t&&t.addEventListener("show.bs.offcanvas",(t=>{const e=t.relatedTarget,s=e.getAttribute("data-bs-dispatch-sid");this.activeDispatch=this.dispatches.find((t=>t.sid==s))}))}}},Q=s(4100);const w=(0,Q.c)(x,[["render",y]]);var A=w},4880:function(t,e,s){s.d(e,{c:function(){return P}});var a=s(4108),i=s(7764),n=s(9096);const l={key:0,class:"offcanvas offcanvas-bottom h-75",tabindex:"-1",id:"dispatchStockInModal","aria-labelledby":"dispatchStockInModalLabel",style:{"max-width":"100vw"}},d=(0,a.QD)("div",{class:"offcanvas-header border-bottom"},[(0,a.QD)("div",{class:"offcanvas-title fw-bold ls-1 font-title"},"Book Purchase"),(0,a.QD)("button",{type:"button",class:"btn-close","data-bs-dismiss":"offcanvas","aria-label":"Close"})],-1),c={class:"offcanvas-body pt-3",style:{"overflow-x":"hidden"}},o={class:"mb-3"},r={class:"d-flex justify-content-between"},f={class:"d-flex flex-column me-1"},p=(0,a.QD)("label",{for:"invoiceId",class:"form-label"},"Invoice No:",-1),u={class:"d-flex flex-column ms-1"},b=(0,a.QD)("label",{for:"invoiceDate",class:"form-label"},"Invoice Date:",-1),h={key:0,class:"mt-2 text-danger"},m=["src","data-bs-url"],v={class:"flex-fill d-flex justify-content-between ps-2"},D={class:"flex-fill d-flex flex-column justify-content-between"},g={class:"flex-fill d-flex justify-content-between"},y={class:"text-capitalize fw-500"},x={class:"fw-bold"},Q={class:"fw-500 flex-fill border-bottom py-1"},w={class:"d-flex"},A=["onClick"],k=(0,a.QD)("i",{class:"bi bi-dash-lg"},null,-1),W=[k],_=["onUpdate:modelValue","max","min"],z=["onClick"],I=(0,a.QD)("i",{class:"bi bi-plus-lg"},null,-1),M=[I],q=(0,a.QD)("div",{class:"btn-group d-flex"},[(0,a.QD)("button",{type:"button",class:"btn btn-danger rounded-0","data-bs-dismiss":"offcanvas"},"Cancel"),(0,a.QD)("button",{type:"submit",class:"btn btn-success rounded-0"},"Accept")],-1);function j(t,e,s,k,I,j){return I.activeDispatch?((0,a.Wz)(),(0,a.An)("div",l,[d,(0,a.QD)("div",c,[(0,a.QD)("form",{onSubmit:e[3]||(e[3]=(0,i.Y7)(((...t)=>j.postPurchase&&j.postPurchase(...t)),["prevent"])),method:"post",class:"w-100 h-100",style:{"overflow-x":"hidden"}},[(0,a.QD)("div",o,[(0,a.QD)("div",r,[(0,a.QD)("div",f,[p,(0,a.wt)((0,a.QD)("input",{type:"text",id:"invoiceId",class:"form-control","onUpdate:modelValue":e[0]||(e[0]=t=>I.invoiceId=t)},null,512),[[i.Og,I.invoiceId]])]),(0,a.QD)("div",u,[b,(0,a.wt)((0,a.QD)("input",{type:"date",id:"invoiceDate",class:"form-control","onUpdate:modelValue":e[1]||(e[1]=t=>I.invoiceDate=t)},null,512),[[i.Og,I.invoiceDate]])])]),I.error?((0,a.Wz)(),(0,a.An)("small",h,(0,n.WA)(I.error),1)):(0,a.g1)("",!0)]),((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(I.activeDispatch.items,((t,e)=>((0,a.Wz)(),(0,a.An)("div",{class:"d-flex justify-content-between mb-3",key:e},[(0,a.QD)("img",{src:t.image,class:"of-cover w-100p","data-bs-toggle":"modal","data-bs-target":"#imagePreviewModal","data-bs-url":t.preview},null,8,m),(0,a.QD)("div",v,[(0,a.QD)("div",D,[(0,a.QD)("div",g,[(0,a.QD)("span",y,(0,n.WA)(t.option),1),(0,a.QD)("span",x,(0,n.WA)(t.quantity)+" pcs.",1)]),((0,a.Wz)(!0),(0,a.An)(a.ae,null,(0,a.mi)(t.ranges,((e,s)=>((0,a.Wz)(),(0,a.An)("div",{class:"d-flex justify-content-between align-items-center small mb-1",key:s},[(0,a.QD)("div",Q,(0,n.WA)(e.range),1),(0,a.QD)("div",w,[(0,a.QD)("button",{class:"btn btn-sm btn-outline-dark border rounded-0",type:"button",onClick:s=>j.decrement(t,`${t.option_sid}_${e.range_sid}`)},W,8,A),(0,a.wt)((0,a.QD)("input",{type:"number",style:{width:"60px"},class:"form-control form-control-sm text-end rounded-0","onUpdate:modelValue":s=>I.formData[`${t.option_sid}_${e.range_sid}`]=s,max:Math.round(e.max_quantity),min:Math.round(e.min_quantity)},null,8,_),[[i.Og,I.formData[`${t.option_sid}_${e.range_sid}`]]]),(0,a.QD)("button",{class:"btn btn-sm btn-outline-dark border rounded-0",type:"button",onClick:s=>j.increment(t,`${t.option_sid}_${e.range_sid}`)},M,8,z)])])))),128))])])])))),128)),(0,a.wt)((0,a.QD)("textarea",{class:"form-control rounded-0 mb-3","onUpdate:modelValue":e[2]||(e[2]=t=>I.content=t),placeholder:"Enter message here ..."},null,512),[[i.Og,I.content]]),q],32)])])):(0,a.g1)("",!0)}var O={name:"DispatchStockIn",props:["dispatches"],data(){return{activeDispatch:{},invoiceDate:(new Date).toISOString().slice(0,10),invoiceId:"121212",content:"",error:null,formData:{},stockInDisable:!1}},async mounted(){this.loadActiveDispatch()},watch:{activeDispatch:{immediate:!0,handler(t,e){e&&t.sid!==e.sid?this.initializeFormData(t):e||this.initializeFormData(t)}}},methods:{initializeFormData(t){void 0!==t.sid&&Object.values(this.activeDispatch.items).forEach((t=>{Object.values(t.ranges).forEach((e=>{const s=`${t.option_sid}_${e.range_sid}`;this.formData[s]=e.quantity}))}))},loadActiveDispatch(){const t=document.getElementById("dispatchStockInModal");t&&t.addEventListener("show.bs.offcanvas",(t=>{const e=t.relatedTarget,s=e.getAttribute("data-bs-dispatch-sid");this.activeDispatch=this.dispatches.find((t=>t.sid==s))}))},increment(t,e){this.formData[e]<Math.round(t.max_quantity)?this.formData[e]++:(this.error="Maximum quantity reached.",this.formData[e]=Math.round(t.max_quantity))},decrement(t,e){this.formData[e]>Math.round(t.min_quantity)?this.formData[e]--:(this.error="Minimum quantity reached.",this.formData[e]=Math.round(t.min_quantity))},postPurchase(){if(this.stockInDisable)return;if(!this.invoiceDate)return void(this.error="Invoice date is required.");if(!this.invoiceId)return void(this.error="Invoice ID is required.");const t={content:this.content,quantities:JSON.stringify(this.formData),ledger_sid:this.activeDispatch.ledger_sid,doc_id:this.invoiceId,doc_date:this.invoiceDate,dispatch_sid:this.activeDispatch.sid};this.stockInDisable=!0,this.$store.dispatch("brandy/postStockIn",t)}}},S=s(4100);const $=(0,S.c)(O,[["render",j]]);var P=$},9176:function(t,e,s){s.d(e,{c:function(){return b}});var a=s(4108),i=s(9096);const n={class:"list-group list-group-flush border-bottom py-5"},l={class:"list-group-item d-flex flex-column align-items-center"},d=(0,a.QD)("div",{class:"d-flex justify-content-center align-items-center rounded-circle border bg-light",style:{height:"60px",width:"60px"}},[(0,a.QD)("i",{class:"bi bi-funnel text-secondary fs-1",style:{opacity:"60%"}})],-1),c={class:"d-flex flex-fill flex-column px-3 mt-3"},o={class:"fw-bold font-title mb-0"};function r(t,e,s,r,f,p){return(0,a.Wz)(),(0,a.An)("div",n,[(0,a.QD)("div",l,[d,(0,a.QD)("div",c,[(0,a.QD)("p",o,(0,i.WA)(s.title),1)])])])}var f={name:"EmptyList",props:["title"]},p=s(4100);const u=(0,p.c)(f,[["render",r]]);var b=u}}]);
//# sourceMappingURL=9524.5156c492.js.map