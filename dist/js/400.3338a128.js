"use strict";(self["webpackChunkwsgbrand_app_v1"]=self["webpackChunkwsgbrand_app_v1"]||[]).push([[400],{1400:function(e,t,l){l.r(t),l.d(t,{default:function(){return pe}});var s=l(4108);const a={class:"w-100",style:{"overflow-x":"hidden"}},r={class:"row row-cols-2 row-cols-md-3 row-cols-xl-4 g-2"};function i(e,t,l,i,o,n){const c=(0,s.E1)("RunningFilter"),d=(0,s.E1)("product-card");return(0,s.Wz)(),(0,s.An)("div",a,[(0,s.K2)(c,{title:n.filteredStocks.length+" / "+o.ledgers.length,onOrderFilterChanged:n.handleFiltersChange},null,8,["title","onOrderFilterChanged"]),(0,s.QD)("div",r,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(n.filteredStocks,((e,t)=>((0,s.Wz)(),(0,s.Az)(d,{key:t,ledger:e,product:e.product,productIndex:t},null,8,["ledger","product","productIndex"])))),128))])])}var o=l(6376),n=l(9096),c=l(7764);const d={class:"navbar navbar-expand bg-body-tertiary p-0 border-bottom"},h={class:"d-flex flex-column px-3"},u={style:{"font-weight":"500"}},g={class:"small"},p={class:"navbar-collapse d-flex"},f={class:"navbar-nav ms-auto align-items-center"},m={class:"nav-item"},b={class:"nav-link form-check form-switch",style:{width:"30px"}},v={class:"d-flex flex-column justify-content-center align-items-center"},y={class:"small pt-1 text-muted",style:{"font-weight":"600","margin-left":"-2.4rem"}},w={class:"nav-item dropstart"},D=(0,s.QD)("a",{class:"nav-link pt-0",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,s.QD)("div",{class:"d-flex flex-column justify-content-center align-items-center"},[(0,s.QD)("i",{class:"bi bi-info-circle text-dark fs-5"}),(0,s.QD)("span",{class:"small text-muted",style:{"font-weight":"500"}},"Info")])],-1),x={class:"dropdown-menu"},Q={class:"dropdown-item"},k={class:"d-flex align-items-center py-1"},W={key:0,class:"px-1"},A={class:"ps-2"},S=(0,s.QD)("li",{class:"nav-item"},[(0,s.QD)("a",{class:"nav-link pt-0",href:"#",role:"button","data-bs-toggle":"collapse","data-bs-target":"#runningOrdersMenuCollapse","aria-expanded":"false","aria-controls":"runningOrdersMenuCollapse"},[(0,s.QD)("div",{class:"d-flex flex-column justify-content-center align-items-center"},[(0,s.QD)("i",{class:"bi bi-chevron-down text-dark fs-5"}),(0,s.QD)("span",{class:"small text-muted",style:{"font-weight":"500"}},"Menu")])])],-1),_={class:"collapse",id:"runningOrdersMenuCollapse"},z={class:"card card-body"},F={class:"form-floating mb-3"},B=(0,s.QD)("label",{for:"floatingInput"},"Search by name or code",-1),C={class:"form-floating"},O=(0,s.QD)("option",{selected:"",value:"default"},"Choose order stage",-1),q=["value"],H=(0,s.QD)("label",{for:"floatingSelect"},"Filter by order stage",-1);function I(e,t,l,a,r,i){return(0,s.Wz)(),(0,s.An)("div",null,[(0,s.QD)("nav",d,[(0,s.QD)("div",h,[(0,s.QD)("span",u,"Showing: "+(0,n.WA)(l.title),1),(0,s.QD)("span",g,(0,n.WA)(r.showHighStock?"Catelogs having balance order":"Catelogs that doesnot have order"),1)]),(0,s.QD)("div",p,[(0,s.QD)("ul",f,[(0,s.QD)("li",m,[(0,s.QD)("div",b,[(0,s.QD)("div",v,[(0,s.wt)((0,s.QD)("input",{class:"form-check-input",type:"checkbox",role:"switch","onUpdate:modelValue":t[0]||(t[0]=e=>r.showHighStock=e)},null,512),[[c.cV,r.showHighStock]]),(0,s.QD)("span",y,(0,n.WA)(r.showHighStock?"Running":"Assigned"),1)])])]),(0,s.QD)("li",w,[D,(0,s.QD)("ul",x,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(r.infos,((e,t)=>((0,s.Wz)(),(0,s.An)("li",{key:t},[(0,s.QD)("div",Q,[(0,s.QD)("div",k,[e.text?((0,s.Wz)(),(0,s.An)("div",W,(0,n.WA)(e.text),1)):((0,s.Wz)(),(0,s.An)("div",{key:1,class:(0,n.WN)(["rounded-circle",e.color]),style:{height:"20px",width:"20px"}},null,2)),(0,s.QD)("div",A,(0,n.WA)(e.name),1)])])])))),128))])]),S])])]),(0,s.QD)("div",_,[(0,s.QD)("div",z,[(0,s.QD)("div",F,[(0,s.wt)((0,s.QD)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.tagSearch=e),type:"search",class:"form-control",placeholder:"Search Stocks"},null,512),[[c.Og,r.tagSearch]]),B]),(0,s.QD)("div",C,[(0,s.wt)((0,s.QD)("select",{class:"form-select","onUpdate:modelValue":t[2]||(t[2]=e=>r.filterBy=e),"aria-label":"Floating label select example"},[O,((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(i.filteredInfos,((e,t)=>((0,s.Wz)(),(0,s.An)("option",{key:t,value:e.model},(0,n.WA)(e.name),9,q)))),128))],512),[[c.Ip,r.filterBy]]),H])])])])}var L={name:"RunningFilter",props:["title"],data(){return{showHighStock:!0,tagSearch:"",filterBy:"default",infos:[{filterable:!0,model:"Order",name:"New Order",color:"bg-danger"},{filterable:!0,model:"Dispatch",name:"New Dispatch",color:"bg-warning"},{filterable:!1,name:"Balance Qty",text:"B"}],sortBys:[{name:{on:"Latest Order",off:"Oldest Order"},value:"default",selected:!0},{name:{on:"Highest Balance",off:"Lowest Balance"},value:"balance",selected:!1},{name:{on:"Highest Dispatch",off:"Lowest Dispatch"},value:"dispatch",selected:!1}]}},computed:{filteredInfos(){return this.infos.filter((e=>e.filterable))}},mounted(){this.emitFilters()},watch:{showHighStock(e,t){e!==t&&this.emitFilters()},tagSearch(e,t){e!==t&&this.emitFilters()},filterBy(e,t){e!==t&&this.emitFilters()},sortBys(e,t){e!==t&&this.emitFilters()}},methods:{updateSelection(e,t){this.sortBys[e].selected=t},emitFilters(){this.$emit("order-filter-changed",{showHighStock:this.showHighStock,tagSearch:this.tagSearch,filterBy:this.filterBy,sortBys:this.sortBys})}}},N=l(4100);const E=(0,N.c)(L,[["render",I]]);var M=E;const V={class:"col position-relative"},j=["id"],P={class:"carousel-inner",style:{height:"250px","max-height":"250px","overflow-y":"hidden"}},R=["id"],K=["src"],U={key:0,class:"position-absolute top-0 start-0 m-2"},$={class:"d-flex flex-column opacity-50"},T={class:"fw-bolder text-uppercase"},G={class:"d-flex flex-nowrap mt-1",id:"scroll",style:{"overflow-x":"scroll","overflow-y":"hidden"}},J=["data-bs-target","data-bs-slide-to","aria-current"],X=["src"],Y=["src"],Z=(0,s.QD)("div",{class:"d-flex flex-column justify-content-center fw-bold h-45p text-dark w-100 align-items-center"}," No Color Options ",-1),ee={class:"card-footer p-1 border-start border-top"},te={class:"row"},le={class:"col-6 fw-bold"},se={class:"col-6 text-end fw-bold"},ae={class:"col-6 small"},re={class:"col-6 small text-end"},ie={class:"position-absolute top-0 end-0 m-1"},oe={class:"d-flex flex-column"};function ne(e,t,l,a,r,i){const o=(0,s.E1)("router-link");return(0,s.Wz)(),(0,s.An)("div",V,[l.product.options&&l.product.options.length?((0,s.Wz)(),(0,s.An)("div",{key:0,id:"productImages"+l.productIndex,class:"carousel slide"},[(0,s.QD)("div",P,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(l.product.options,((e,t)=>((0,s.Wz)(),(0,s.An)("div",{key:t,id:"cardCarousel"+t,class:(0,n.WN)(["carousel-item position-relative",{active:0===t}])},[(0,s.K2)(o,{to:{name:"VendorLedgerDetail",params:{ledger:l.ledger.sid}}},{default:(0,s.Ql)((()=>[(0,s.QD)("img",{src:e.preview,class:"of-cover w-100"},null,8,K),l.product.ranges&&l.product.ranges.length?((0,s.Wz)(),(0,s.An)("div",U,[(0,s.QD)("div",$,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(l.product.ranges,((e,t)=>((0,s.Wz)(),(0,s.An)("button",{key:t,type:"button",class:"btn btn-dark shadow wh-25 mb-1 p-0"},[(0,s.QD)("span",T,(0,n.WA)(e.abbr),1)])))),128))])])):(0,s.g1)("",!0)])),_:2},1032,["to"])],10,R)))),128))]),(0,s.QD)("div",G,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(l.product.options,((e,t)=>((0,s.Wz)(),(0,s.An)("button",{key:t,type:"button",class:(0,n.WN)(["rounded p-0 border me-1",{active:0===t}]),"data-bs-target":"#productImages"+l.productIndex,"data-bs-slide-to":t,"aria-current":0===t?"true":"false"},[(0,s.QD)("img",{src:e.image,class:"wh-40 of-cover",style:{scale:"1.6"}},null,8,X)],10,J)))),128))])],8,j)):((0,s.Wz)(),(0,s.Az)(o,{key:1,to:{name:"VendorLedgerDetail",params:{ledger:l.ledger.sid}},class:"td-none"},{default:(0,s.Ql)((()=>[(0,s.QD)("img",{src:l.product.image,class:"of-cover w-100",style:{height:"250px","max-height":"250px","overflow-y":"hidden"}},null,8,Y),Z])),_:1},8,["to"])),(0,s.K2)(o,{to:{name:"VendorLedgerDetail",params:{ledger:l.ledger.sid}},class:"td-none text-dark"},{default:(0,s.Ql)((()=>[(0,s.QD)("div",ee,[(0,s.QD)("div",te,[(0,s.QD)("div",le,"#"+(0,n.WA)(l.ledger.product_code),1),(0,s.QD)("div",se,"B:"+(0,n.WA)(l.ledger.balance_qty),1),(0,s.QD)("div",ae,"R:"+(0,n.WA)(l.ledger.readyable_qty),1),(0,s.QD)("div",re,"D:"+(0,n.WA)(l.ledger.dispatchable_qty),1)])])])),_:1},8,["to"]),(0,s.QD)("div",ie,[(0,s.QD)("div",oe,[l.product.last_activity?((0,s.Wz)(),(0,s.An)("i",{key:0,class:(0,n.WN)(["bi bi-circle-fill px-1",{"text-danger":"Order"===l.product.last_activity,"text-warning":"Dispatch"===l.product.last_activity}])},null,2)):(0,s.g1)("",!0)])])])}var ce={name:"ProductCard",props:{ledger:Object,product:Object,index:Number,productIndex:Number}};const de=(0,N.c)(ce,[["render",ne]]);var he=de,ue={name:"LedgersPage",components:{RunningFilter:M,ProductCard:he},data(){return{filters:[],page:1,isFetching:!1,ledgers:[]}},mounted(){this.loadMore(),window.addEventListener("scroll",this.handleScroll)},unmounted(){window.removeEventListener("scroll",this.handleScroll)},computed:{filteredStocks(){let e=[];if(e=this.filters.showHighStock?this.ledgers.filter((e=>e.balance_qty)):this.ledgers.filter((e=>!e.balance_qty)),this.filters.tagSearch){const t=this.filters.tagSearch.toLowerCase();e=e.filter((e=>{const l=e.product.tags.split(",");return console.log(l),l.some((e=>e.toLowerCase().includes(t.trim())))}))}return"default"!==this.filters.filterBy&&(e=e.filter((e=>e.last_activity===this.filters.filterBy))),this.filters.sortBys&&this.filters.sortBys.length&&this.filters.sortBys.forEach((t=>{if(t.selected)switch(t.value){case"balance":e=e.slice().sort(((e,t)=>e.balance_qty-t.balance_qty));break;case"ready":e=e.slice().sort(((e,t)=>e.readyable_qty-t.readyable_qty));break;case"demand":e=e.slice().sort(((e,t)=>e.demandable_qty-t.demandable_qty));break;case"disptach":e=e.slice().sort(((e,t)=>e.dispatchable_qty-t.dispatchable_qty));break;default:break}})),e}},methods:{handleScroll(){const{scrollTop:e,scrollHeight:t,clientHeight:l}=document.documentElement;l+e>=t-5&&this.loadMore()},loadMore(){this.isFetching||(this.isFetching=!0,o.c.get(`party/ledgers?page=${this.page}`).then((e=>{"ok"===e.data.status?(this.ledgers=[...this.ledgers,...e.data.data.data],this.page++,this.isFetching=!1):"error"===e.data.status?(this.isFetching=!1,alert(e.data.message)):(this.isFetching=!1,alert("Something went wrong! Please try again"))})).catch((e=>{this.isFetching=!1,console.log(e),alert("Something went wrong! Please try again")})))},handleFiltersChange(e){this.filters=e}}};const ge=(0,N.c)(ue,[["render",i]]);var pe=ge}}]);
//# sourceMappingURL=400.3338a128.js.map