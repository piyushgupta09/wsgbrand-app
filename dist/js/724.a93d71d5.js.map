{"version":3,"file":"js/724.a93d71d5.js","mappings":"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","sources":["webpack://wsgbrand-app-v1/./src/modules/brandy/pages/orders/SaleOrdersPage.vue","webpack://wsgbrand-app-v1/./src/modules/brandy/pages/orders/SaleOrdersPage.vue?e37e"],"sourcesContent":["<template>\n    <div>\n        <OrderFilters\n            :title=\"title\"\n            :filters=\"filters\"\n            :statuses=\"statuses\"\n            @order-filter-updated=\"handleFiltersChange\">\n        </OrderFilters>\n        <OrderTabs :links=\"links\"></OrderTabs>\n        <OrderTabs v-if=\"prefix === 'brand'\" />\n        <div v-if=\"Object.keys(filteredOrders).length\">\n            <div v-for=\"(order, orderIndex) in filteredOrders\" :key=\"orderIndex\">\n                <ul class=\"list-group list-group-flush\">\n                    <OrderCard :order=\"order\" :type=\"prefix\" />\n                </ul>\n            </div>\n        </div>\n        <EmptyList v-else title=\"No Orders Available, try adjusting filters\"></EmptyList>\n        <OrderDetails :orders=\"filteredOrders\"  :type=\"prefix\" />\n    </div>\n</template>\n\n<script>\nimport Axios from '@/services/axios';\nimport EmptyList from '@/components/EmptyList.vue';\nimport OrderCard from '@/components/OrderCard.vue';\nimport OrderTabs from '@/components/OrderTabs.vue';\nimport OrderFilters from '@/components/OrderFilters.vue';\nimport OrderDetails from '@/components/OrderDetails.vue';\n\nexport default {\n    name: 'OrdersPage',\n    components: {\n        OrderCard,\n        EmptyList,\n        OrderTabs,\n        OrderDetails,\n        OrderFilters,\n    },\n    data() {\n        return {\n            title: 'Wsg Orders',\n            page: 1,\n            isFetching: false,\n            orders: [],\n            filters: {\n                date: '',\n                search: '',\n                selectedParty: '',\n                selectedStatus: 'accepted',\n                sortBys: [\n                    { name: { on: 'Latest Order', off: 'Oldest Order' }, selected: true },\n                    { name: { on: 'Nearest Delivery', off: 'Furthest Delivery' }, selected: false },\n                    { name: { on: 'Highest Quantity', off: 'Lowest Quantity' }, selected: false },\n                ],\n            },\n            links: [\n                { name: 'BrandSaleOrders', label: 'Wsg Orders' },\n                { name: 'BrandPurchaseOrders', label: 'Party Orders' }\n            ],\n        };\n    },\n    mounted() {\n        this.loadMore();\n        window.addEventListener('scroll', this.handleScroll);\n    },\n    unmounted() {\n        window.removeEventListener('scroll', this.handleScroll);\n    },\n    watch: {\n        filters: {\n            handler(newValue, oldValue) {\n                if (newValue.selectedStatus !== oldValue.selectedStatus \n                    || newValue.search !== oldValue.search) {\n                    this.page = 1;\n                    this.orders = [];\n                    this.loadMore();\n                }\n            },\n            deep: true,\n        },\n    },\n    computed: {\n        statuses() {\n            return [\n                { text: 'Issued', value: 'issued' },\n                { text: 'Accepted', value: 'accepted' },\n                { text: 'Rejected', value: 'rejected' },\n                { text: 'Completed', value: 'completed' },\n            ];\n        },\n        filteredOrders() {\n            let orders = this.orders;\n\n            if (this.filters.search) {\n                const searchTerm = this.filters.search.toLowerCase();\n                orders = orders.filter((order) => {\n                    const orderTags = order.tags.split(',');\n                    return orderTags.some(tag => tag.toLowerCase().includes(searchTerm.trim()));\n                });\n            }\n\n            if (this.filters.selectedStatus) {\n                orders = orders.filter(order => order.status === this.filters.selectedStatus);\n            }\n\n            if (this.filters.sortBys[0].selected) {\n                orders = orders.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\n            } else {\n                orders = orders.sort((a, b) => new Date(a.created_at) - new Date(b.created_at));\n            }\n\n            if (this.filters.sortBys[1].selected) {\n                orders = orders.sort((a, b) => new Date(b.expected_at) - new Date(a.expected_at));\n            } else {\n                orders = orders.sort((a, b) => new Date(a.expected_at) - new Date(b.expected_at));\n            }\n            \n            if (this.filters.sortBys[2].selected) {\n                orders = orders.sort((a, b) => b.quantity - a.quantity);\n            } else {\n                orders = orders.sort((a, b) => a.quantity - b.quantity);\n            }\n\n            return orders;\n        },\n        prefix() {\n            return this.$store.getters['authy/getPrefix'];\n        },\n    },\n    methods: {\n        handleScroll() {\n            const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n            if (clientHeight + scrollTop >= scrollHeight - 5) { // Check if near bottom\n                this.loadMore();\n            }\n        },\n        loadMore() {\n            if (this.isFetching)\n                return;\n            this.isFetching = true;\n            \n            Axios.get(`orders?page=${this.page}&status=${this.filters.selectedStatus}&search=${this.filters.search}`)\n                .then((response) => {\n                    if (response.data.status === 'ok') {\n                        this.orders = [...this.orders, ...response.data.data.data];\n                        this.page++;\n                        this.isFetching = false;\n                    }\n                    else if (response.data.status === 'error') {\n                        this.isFetching = false;\n                        alert(response.data.message);\n                    }\n                    else {\n                        this.isFetching = false;\n                        alert('Something went wrong! Please try again');\n                    }\n                }).catch((error) => {\n                    this.isFetching = false;\n                    console.log(error);\n                    alert('Something went wrong! Please try again');\n                });\n        },\n        handleFiltersChange(filters) {\n            this.filters = filters;\n        },\n    },\n}\n</script>\n  ","import { render } from \"./SaleOrdersPage.vue?vue&type=template&id=a3269556\"\nimport script from \"./SaleOrdersPage.vue?vue&type=script&lang=js\"\nexport * from \"./SaleOrdersPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["key","class","_createElementBlock","_createVNode","_component_OrderFilters","title","$data","filters","statuses","$options","onOrderFilterUpdated","handleFiltersChange","_component_OrderTabs","links","prefix","_createBlock","_createCommentVNode","Object","keys","filteredOrders","length","_hoisted_1","_Fragment","_renderList","order","orderIndex","_createElementVNode","_hoisted_2","_component_OrderCard","type","_component_EmptyList","_component_OrderDetails","orders","name","components","OrderCard","EmptyList","OrderTabs","OrderDetails","OrderFilters","data","page","isFetching","date","search","selectedParty","selectedStatus","sortBys","on","off","selected","label","mounted","this","loadMore","window","addEventListener","handleScroll","unmounted","removeEventListener","watch","handler","newValue","oldValue","deep","computed","text","value","searchTerm","toLowerCase","filter","orderTags","tags","split","some","tag","includes","trim","status","sort","a","b","Date","created_at","expected_at","quantity","$store","getters","methods","scrollTop","scrollHeight","clientHeight","document","documentElement","Axios","get","then","response","alert","message","catch","error","console","log","__exports__","render"],"sourceRoot":""}