{"version":3,"file":"js/88.730e0e45.js","mappings":"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","sources":["webpack://wsgbrand-app-v1/./src/modules/vendor/pages/NewOrdersPage.vue","webpack://wsgbrand-app-v1/./src/modules/vendor/pages/NewOrdersPage.vue?0cb5","webpack://wsgbrand-app-v1/./src/sections/NewOrdersSection.vue","webpack://wsgbrand-app-v1/./src/sections/NewOrdersSection.vue?ea50"],"sourcesContent":["<template>\n    <new-orders-section module=\"vendor\" />\n</template>\n\n<script>\nimport NewOrdersSection from '@/sections/NewOrdersSection.vue';\n\nexport default {\n    name: 'LedgerChatsPage',\n    components: { NewOrdersSection },\n};\n</script>","import { render } from \"./NewOrdersPage.vue?vue&type=template&id=744938a7\"\nimport script from \"./NewOrdersPage.vue?vue&type=script&lang=js\"\nexport * from \"./NewOrdersPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n    <div class=\"font-title\">\n        <OrderFilters\n            :title=\"title\"\n            :filters=\"filters\"\n            :parties=\"parties\"\n            :statuses=\"statuses\"\n            @order-filter-updated=\"handleFiltersChange\" \n        />\n\n        <OrderTabs v-if=\"prefix === 'brand'\" :links=\"links\"/>\n\n        <div v-if=\"Object.keys(orders).length\">\n            <div v-for=\"(order, orderIndex) in orders\" :key=\"orderIndex\">\n                <ul class=\"list-group list-group-flush\">\n                    <OrderCard :order=\"order\" :type=\"prefix\" />\n                </ul>\n            </div>\n        </div>\n        <EmptyList v-else title=\"No Orders Available, try adjusting filters\" />\n        <OrderDetails :orders=\"orders\"  :type=\"prefix\" />\n    </div>\n</template>\n\n<script>\nimport Axios from '@/services/axios';\nimport EmptyList from '@/components/EmptyList.vue';\nimport OrderCard from '@/components/OrderCard.vue';\nimport OrderTabs from '@/components/OrderTabs.vue';\nimport OrderFilters from '@/components/OrderFilters.vue';\nimport OrderDetails from '@/components/OrderDetails.vue';\n\nexport default {\n    name: 'NewOrdersSection',\n    props: {\n        module: {\n            type: String,\n            required: true,\n        },\n        links: {\n            type: Array,\n            required: true,\n        },\n    },\n    components: {\n        OrderCard,\n        EmptyList,\n        OrderTabs,\n        OrderDetails,\n        OrderFilters,\n    },\n    data() {\n        return {\n            title: 'New Orders',\n            page: 1,\n            isFetching: false,\n            orders: [],\n            filters: {\n                date: '',\n                search: '',\n                selectedStatus: 'issued',\n                selectedParty: '',\n                perPage: 10,\n                sortBys: [\n                    { name: 'Latest Order', selected: true, value: 'created_at', order: 'desc'},\n                    { name: 'Oldest Order', selected: false, value: 'created_at', order: 'asc'},\n                    { name: 'Highest Quantity', selected: false, value: 'quantity', order: 'desc'},\n                    { name: 'Lowest Quantity', selected: false, value: 'quantity', order: 'asc'},\n                    { name: 'Nearest Delivery', selected: false, value: 'expected_at', order: 'asc'},\n                    { name: 'Furthest Delivery', selected: false, value: 'expected_at', order: 'desc'},\n                ],\n            },\n        };\n    },\n    mounted() {\n        window.addEventListener('scroll', this.handleScroll);\n        if (this.$route.query && this.$route.query.search) {\n            this.filters.search = this.$route.query.search || '';\n        }\n        if (this.$route.query && this.$route.query.status) {\n            this.filters.selectedStatus = this.$route.query.status || '';\n        }\n        this.loadMore();\n    },\n    unmounted() {\n        window.removeEventListener('scroll', this.handleScroll);\n    },\n    watch: {\n        filters: {\n            handler() {\n                console.log('Filters changed');\n                this.page = 1;\n                this.orders = [];\n                this.loadMore();\n            },\n            deep: true,\n        },\n    },\n    computed: {\n        cardType() {\n            return this.$store.getters['authy/getPrefix'] === 'brand' ? 'brand' : 'party';\n        },\n        parties() {\n            if (this.orders && !this.orders.length) {\n                return [];\n                \n            }\n            const localOrders = this.orders;\n            const uniquePartiesMap = {};\n            const uniqueParties = [];\n\n            if (localOrders) {\n                localOrders.forEach(order => {\n                    // Use sid as the key in the map.\n                    const sid = order.party.sid;\n                    // If this sid hasn't been added to uniqueParties, add it.\n                    if (!uniquePartiesMap[sid]) {\n                        uniqueParties.push(order.party);\n                        uniquePartiesMap[sid] = true; // Mark this sid as added.\n                    }\n                });\n            }\n            \n            return uniqueParties;\n        },\n        statuses() {\n            return [\n                { text: 'Issued', value: 'issued' },\n                { text: 'Accepted', value: 'accepted' },\n                { text: 'Rejected', value: 'rejected' },\n            ];\n        },\n        prefix() {\n            return this.$store.getters['authy/getPrefix'];\n        },\n    },\n    methods: {\n        handleScroll() {\n            const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n            if (clientHeight + scrollTop >= scrollHeight - 5) { // Check if near bottom\n                this.loadMore();\n            }\n        },\n        loadMore() {\n            if (this.isFetching)\n                return;\n            this.isFetching = true;\n\n            const params = new URLSearchParams({\n                page: this.page,\n                search: this.filters.search,\n                status: this.filters.selectedStatus,\n                party: this.filters.selectedParty,\n            });\n\n            // Assuming you have only one selected sort option at a time\n            const selectedSortOption = this.filters.sortBys.find(option => option.selected);\n            if (selectedSortOption) {\n                params.append('sortby', selectedSortOption.value);\n                params.append('sortorder', selectedSortOption.order);\n            }\n\n            \n            Axios.get(`orders?${params}&perpage=${this.filters.perPage}`).then(response => {\n                    if (response.data.status === 'ok') {\n                        this.orders = [...this.orders, ...response.data.data.data];\n                        this.page++;\n                        this.isFetching = false;\n                    }\n                    else if (response.data.status === 'error') {\n                        this.isFetching = false;\n                        alert(response.data.message);\n                    }\n                    else {\n                        this.isFetching = false;\n                        alert('Something went wrong! Please try again');\n                    }\n                }).catch((error) => {\n                    this.isFetching = false;\n                    console.log(error);\n                    alert('Something went wrong! Please try again');\n                });\n        },\n        handleFiltersChange(filters) {\n            this.filters = filters;\n        },\n        resetFilters() {\n            this.filters = {\n                date: '',\n                search: '',\n                selectedStatus: 'issued',\n                selectedParty: '',\n                perPage: 10,\n                sortBys: [\n                    { name: 'Latest Order', selected: true, value: 'created_at', order: 'desc'},\n                    { name: 'Oldest Order', selected: false, value: 'created_at', order: 'asc'},\n                    { name: 'Highest Quantity', selected: false, value: 'quantity', order: 'desc'},\n                    { name: 'Lowest Quantity', selected: false, value: 'quantity', order: 'asc'},\n                    { name: 'Nearest Delivery', selected: false, value: 'expected_at', order: 'asc'},\n                    { name: 'Furthest Delivery', selected: false, value: 'expected_at', order: 'desc'},\n                ],\n            };\n        },\n    },\n}\n</script>\n  ","import { render } from \"./NewOrdersSection.vue?vue&type=template&id=9f64d492\"\nimport script from \"./NewOrdersSection.vue?vue&type=script&lang=js\"\nexport * from \"./NewOrdersSection.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createBlock","_component_new_orders_section","module","name","components","NewOrdersSection","__exports__","render","class","key","_createElementBlock","_hoisted_1","_createVNode","_component_OrderFilters","title","$data","filters","parties","$options","statuses","onOrderFilterUpdated","handleFiltersChange","prefix","_component_OrderTabs","links","$props","_createCommentVNode","Object","keys","orders","length","_hoisted_2","_Fragment","_renderList","order","orderIndex","_createElementVNode","_hoisted_3","_component_OrderCard","type","_component_EmptyList","_component_OrderDetails","props","String","required","Array","OrderCard","EmptyList","OrderTabs","OrderDetails","OrderFilters","data","page","isFetching","date","search","selectedStatus","selectedParty","perPage","sortBys","selected","value","mounted","window","addEventListener","this","handleScroll","$route","query","status","loadMore","unmounted","removeEventListener","watch","handler","console","log","deep","computed","cardType","$store","getters","localOrders","uniquePartiesMap","uniqueParties","forEach","sid","party","push","text","methods","scrollTop","scrollHeight","clientHeight","document","documentElement","params","URLSearchParams","selectedSortOption","find","option","append","Axios","get","then","response","alert","message","catch","error","resetFilters"],"sourceRoot":""}