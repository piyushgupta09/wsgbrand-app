"use strict";(self["webpackChunkwsgbrand_app_v1"]=self["webpackChunkwsgbrand_app_v1"]||[]).push([[584],{2584:function(t,e,a){a.r(e),a.d(e,{default:function(){return kt}});var s=a(4108);const l={class:""},r={class:"list-group list-group-flush rounded-0"},i=["data-bs-doc-sid"],n=(0,s.QD)("div",{class:"w-100 py-2 my-2 fw-bold ls-1 font-title text-bg-dark text-center"}," Assigned Catelogs ",-1);function c(t,e,a,c,d,o){const u=(0,s.E1)("PartiesFilter"),p=(0,s.E1)("party-card"),f=(0,s.E1)("party-info"),v=(0,s.E1)("party-details"),m=(0,s.E1)("offcanvas-card");return(0,s.Wz)(),(0,s.An)("div",l,[(0,s.K2)(u,{title:"All Parties",filters:d.filters,statuses:o.statuses,onPartyFilterUpdated:o.handleFiltersUpdate},null,8,["filters","statuses","onPartyFilterUpdated"]),(0,s.QD)("ul",r,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(o.filteredParties,((t,e)=>((0,s.Wz)(),(0,s.An)("li",{class:"list-group-item p-2","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasCard","data-bs-doc-sid":t.sid,"aria-controls":"offcanvasCard",key:e},[(0,s.K2)(p,{party:t},null,8,["party"])],8,i)))),128))]),(0,s.K2)(m,{model_id:"offcanvasCard",title:"Party Details",list:o.filteredParties},{default:(0,s.Ql)((t=>[(0,s.K2)(f,{party:t.activeItem},null,8,["party"]),n,(0,s.K2)(v,{party:t.activeItem},null,8,["party"])])),_:1},8,["list"])])}var d=a(9096);const o=["id","aria-labelledby"],u={class:"offcanvas-header w-100 d-flex justify-content-between align-items-center bg-light border-bottom"},p={class:"d-flex flex-fill justify-content-start gap-2 align-items-center"},f=["data-bs-target"],v={class:"text-uppercase"},m={class:""},y={class:"offcanvas-body p-2"};function b(t,e,a,l,r,i){return r.activeItem?((0,s.Wz)(),(0,s.An)("div",{key:0,class:"offcanvas offcanvas-end",tabindex:"-1",id:a.model_id,"aria-labelledby":a.model_id+"Label"},[(0,s.QD)("div",u,[(0,s.QD)("div",p,[(0,s.QD)("i",{class:"bi bi-chevron-left","data-bs-dismiss":"offcanvas","data-bs-target":"#"+a.model_id,"aria-label":"Close"},null,8,f),(0,s.QD)("div",v,(0,d.WA)(a.title),1)]),(0,s.QD)("span",m,(0,d.WA)(i.count??"None"),1)]),(0,s.QD)("div",y,[(0,s.oF)(t.$slots,"default",{activeItem:r.activeItem})])],8,o)):(0,s.g1)("",!0)}var h={name:"OffcanvasCard",props:["model_id","title","list"],data(){return{activeItem:{}}},async mounted(){this.loadActiveItem()},computed:{count(){return this.activeItem.ledgers&&Array.isArray(this.activeItem.ledgers)&&this.activeItem.ledgers.length>0?this.activeItem.ledgers.length:"None"}},methods:{loadActiveItem(){const t=document.getElementById(this.model_id);t&&t.addEventListener("show.bs.offcanvas",(t=>{const e=t.relatedTarget,a=e.getAttribute("data-bs-doc-sid");this.activeItem=this.list.find((t=>t.sid===a))}))}}},g=a(4100);const D=(0,g.c)(h,[["render",b]]);var Q=D,A=a(7764);const x={class:"border-bottom bg-body-tertiary"},W={class:"navbar navbar-expand py-1"},w={class:"navbar-collapse d-flex align-items-center"},k={class:"d-flex align-items-center"},S=(0,s.QD)("i",{class:"bi bi-chevron-left"},null,-1),I=[S],P={class:"mb-0 ms-2"},F=(0,s.QD)("ul",{class:"navbar-nav ms-auto align-items-center"},[(0,s.QD)("li",{class:"nav-item me-3"},[(0,s.QD)("button",{class:"btn fs-5 border-0","data-bs-toggle":"collapse","data-bs-target":"#offcanvasSearch","aria-expanded":"false","aria-controls":"offcanvasSearch"},[(0,s.QD)("i",{class:"bi bi-search"})])])],-1),C={class:"collapse",id:"offcanvasSearch"},z={class:"form-floating mx-2 mb-2"},_=(0,s.QD)("label",{for:"floatingInput"},"Search by name or code",-1),B={class:"collapse",id:"offcanvasFilter"},E={class:"card card-body"},U=(0,s.QD)("p",{class:"mb-2 fw-bold"},"Filter by status",-1),$={class:"d-flex w-100 border border-end-0"},j=["id","value"],K=["for"],L=(0,s.QD)("div",{class:"collapse",id:"offcanvasSortBy"},[(0,s.QD)("div",{class:"card card-body"})],-1);function N(t,e,a,l,r,i){return(0,s.Wz)(),(0,s.An)("div",x,[(0,s.QD)("nav",W,[(0,s.QD)("div",w,[(0,s.QD)("div",k,[(0,s.QD)("button",{class:"btn",onClick:e[0]||(e[0]=(...t)=>i.goBack&&i.goBack(...t))},I),(0,s.QD)("h6",P,(0,d.WA)(a.title),1)]),F])]),(0,s.QD)("div",C,[(0,s.QD)("div",z,[(0,s.wt)((0,s.QD)("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>r.search=t),type:"search",class:"form-control rounded-0",placeholder:"Search Stocks",onChange:e[2]||(e[2]=(...t)=>i.emitFilters&&i.emitFilters(...t))},null,544),[[A.Og,r.search,void 0,{lazy:!0}]]),_])]),(0,s.QD)("div",B,[(0,s.QD)("div",E,[U,(0,s.QD)("div",$,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(a.statuses,((t,a)=>((0,s.Wz)(),(0,s.An)("div",{class:"flex-fill border-end",key:a},[(0,s.wt)((0,s.QD)("input",{type:"radio",class:"btn-check",id:"filterby"+i.getCheckboxId(a),value:t.value,"onUpdate:modelValue":e[3]||(e[3]=t=>r.selectedStatus=t),onChange:e[4]||(e[4]=(...t)=>i.emitFilters&&i.emitFilters(...t)),name:"statusFilter"},null,40,j),[[A.sz,r.selectedStatus]]),(0,s.QD)("label",{class:"btn btn-outline-dark rounded-0 border-0 w-100",for:"filterby"+i.getCheckboxId(a)},(0,d.WA)(t.text),9,K)])))),128))])])]),L])}var O={name:"PartiesFilter",emits:["party-filter-updated"],props:{title:{type:String,default:"Products"},filters:{type:Object,default:()=>({})},statuses:{type:Array,required:!0}},data(){return{search:this.filters.search||"",selectedStatus:this.filters.selectedStatus||null}},methods:{goBack(){this.$router.go(-1)},applyFilters(){this.$emit("party-filter-updated",{search:this.search,selectedStatus:this.selectedStatus})},resetFilters(){this.search="",this.selectedStatus=""},emitFilters(){this.applyFilters()},getCheckboxId(t){return"Status"+t},updateSelectedSortBy(t){this.localSortBys[t].selected=!this.localSortBys[t].selected,this.applyFilters()}}};const q=(0,g.c)(O,[["render",N]]);var T=q;const V={class:"d-flex gap-3"},Y=["src"],G={class:"position-relative flex-fill"},H={class:"d-flex flex-column justify-content-center h-100"},J={class:"max-line-1 fw-bold"},M={class:""},R={class:"position-absolute end-0 top-0"},X={key:0,class:"btn btn-dark btn-sm p-0 rounded-circle wh-20 smaller fw-bold"};function Z(t,e,a,l,r,i){return(0,s.Wz)(),(0,s.An)("div",V,[(0,s.QD)("img",{src:a.party.image,class:"of-cover rounded wh-60p",style:{"max-width":"60px"}},null,8,Y),(0,s.QD)("div",G,[(0,s.QD)("div",H,[(0,s.QD)("span",J,[(0,s.mY)((0,d.WA)(a.party.business)+" | ",1),(0,s.QD)("small",null,(0,d.WA)(a.party.username),1)]),(0,s.QD)("small",M,(0,d.WA)(a.party.sid)+" | "+(0,d.WA)(a.party.type),1)]),(0,s.QD)("div",R,[a.party.ledgers&&a.party.ledgers.length?((0,s.Wz)(),(0,s.An)("span",X,(0,d.WA)(a.party.ledgers.length),1)):(0,s.g1)("",!0)])])])}var tt={name:"PartyCard",props:["party"]};const et=(0,g.c)(tt,[["render",Z]]);var at=et;const st={class:"d-flex gap-3"},lt=["src"],rt={class:"position-relative flex-fill"},it={class:"d-flex flex-column justify-content-center h-100"},nt={class:"fw-bold"},ct={class:""},dt={class:"position-absolute end-0 top-0"};function ot(t,e,a,l,r,i){return(0,s.Wz)(),(0,s.An)("div",st,[(0,s.QD)("img",{src:a.party.image,class:"of-cover rounded wh-80p"},null,8,lt),(0,s.QD)("div",rt,[(0,s.QD)("div",it,[(0,s.QD)("span",nt,[(0,s.mY)((0,d.WA)(a.party.business)+" | ",1),(0,s.QD)("small",null,(0,d.WA)(a.party.username),1)]),(0,s.QD)("small",ct,(0,d.WA)(a.party.sid)+" | "+(0,d.WA)(a.party.type),1)]),(0,s.QD)("div",dt,[(0,s.QD)("i",{class:(0,d.WN)(["bi bi-record-fill me-1",{"text-success":a.party.active,"text-danger":!a.party.active}])},null,2)])])])}var ut={name:"PartyInfo",props:["party"]};const pt=(0,g.c)(ut,[["render",ot]]);var ft=pt;const vt={class:"row g-2"},mt={key:0,class:"card"},yt=["src"],bt={class:"card-body p-2"},ht={class:"small line-1"},gt={class:"small border-top"};function Dt(t,e,a,l,r,i){const n=(0,s.E1)("router-link");return(0,s.Wz)(),(0,s.An)("div",vt,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(a.party.products,((t,e)=>((0,s.Wz)(),(0,s.Az)(n,{to:{name:"BrandProductDetail",params:{product:t.product_sid}},key:e,class:"col-6 col-lg-3 text-decoration-none"},{default:(0,s.Ql)((()=>[t.name?((0,s.Wz)(),(0,s.An)("div",mt,[(0,s.QD)("img",{src:t.image,class:"of-cover",style:{"max-height":"300px"}},null,8,yt),(0,s.QD)("div",bt,[(0,s.QD)("div",ht,(0,d.WA)(t.name),1),(0,s.QD)("div",gt,"Balance Qty: "+(0,d.WA)(t.balance_qty)+" pcs.",1)])])):(0,s.g1)("",!0)])),_:2},1032,["to"])))),128))])}var Qt={name:"PartyDetail",props:["party"]};const At=(0,g.c)(Qt,[["render",Dt]]);var xt=At,Wt={name:"PartiesPage",components:{PartiesFilter:T,PartyCard:at,PartyInfo:ft,PartyDetails:xt,OffcanvasCard:Q},data(){return{filters:{search:"",selectedStatus:1}}},created(){this.$store.dispatch("brandy/fetchParties"),this.$store.dispatch("brandy/showTopNav")},computed:{parties(){return this.$store.getters["brandy/parties"]},statuses(){return[{text:"Active",value:1},{text:"Inactive",value:0}]},filteredParties(){let t=this.parties;if(this.filters.search){const e=this.filters.search.toLowerCase();t=t.filter((t=>{const a=t.tags.split(",");return a.some((t=>t.toLowerCase().includes(e.trim())))}))}return this.filters.selectedStatus&&(t=t.filter((t=>t.active===this.filters.selectedStatus))),t}},methods:{handleFiltersUpdate(t){this.filters=t}}};const wt=(0,g.c)(Wt,[["render",c]]);var kt=wt}}]);
//# sourceMappingURL=584.2f9708ae.js.map