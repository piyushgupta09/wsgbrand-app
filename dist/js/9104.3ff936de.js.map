{"version":3,"file":"js/9104.3ff936de.js","mappings":"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","sources":["webpack://wsgbrand-app-v1/./src/modules/authy/pages/NotificationsPage.vue","webpack://wsgbrand-app-v1/./src/modules/authy/pages/NotificationsPage.vue?fdc8"],"sourcesContent":["<template>\n    <div class=\"div\">\n\n        <nav class=\"navbar navbar-expand py-1 border-bottom\">\n            <div class=\"navbar-collapse d-flex align-items-center\">\n                <div class=\"d-flex align-items-center\">\n                    <router-link :to=\"{ name: getMyDashboard }\" class=\"btn border-0\">\n                        <i class=\"bi bi-chevron-left\"></i>\n                    </router-link>\n                    <h6 class=\"mb-0 ms-2\">All Notifications</h6>\n                </div>\n                <ul class=\"navbar-nav ms-auto align-items-center\">\n                    <li class=\"nav-item\">\n                        <button class=\"btn fs-5 border-0\" data-bs-toggle=\"collapse\" data-bs-target=\"#offcanvasSearch\" aria-expanded=\"false\" aria-controls=\"offcanvasSearch\">\n                            <i class=\"bi bi-search\"></i>\n                        </button>\n                    </li>\n                    <li class=\"nav-item me-3\">\n                        <button class=\"btn fs-5 border-0\" data-bs-toggle=\"collapse\" data-bs-target=\"#offcanvasFilter\" aria-expanded=\"false\" aria-controls=\"offcanvasFilter\">\n                            <i class=\"bi bi-funnel\"></i>\n                        </button>\n                    </li>\n                </ul>\n            </div>\n        </nav>\n\n        <div class=\"collapse\" id=\"offcanvasSearch\">\n            <div class=\"form-floating mx-2 mb-2\">\n                <input v-model.lazy=\"filters.search\" type=\"search\" class=\"form-control rounded-0\" placeholder=\"Search Notifications\" />\n                <label for=\"floatingInput\">Search here ...</label>\n            </div>\n        </div>\n\n        <div class=\"collapse\" id=\"offcanvasFilter\">\n            <div class=\"card card-body\">\n                <p class=\"mb-2 fw-bold\">Filter by status</p>\n                <div class=\"d-flex w-100 border border-end-0\">\n                    <div class=\"flex-fill border-end\" v-for=\"(status, statusIndex) in statuses\" :key=\"statusIndex\">\n                    <input type=\"radio\" class=\"btn-check\" :id=\"'filterby' + getCheckboxId(statusIndex)\"\n                        :value=\"status.value\"\n                        v-model=\"filters.selectedStatus\"\n                        name=\"statusFilter\"> \n                    <label class=\"btn btn-outline-dark rounded-0 border-0 w-100\" :for=\"'filterby' + getCheckboxId(statusIndex)\">\n                        {{ status.text }}\n                    </label>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <ul class=\"list-group list-group-flush\">\n            <li class=\"list-group-item font-title\" @click=\"takeAction(noti)\"\n                v-for=\"(noti, notiIndex) in notifications\" :key=\"notiIndex\">\n                <div v-if=\"noti && noti.data\" class=\"d-flex flex-column\">\n                    <div class=\"d-flex align-items-center justify-content-between mb-1\">\n                        <span class=\"fw-bold\">{{ noti.data.title }}</span>\n                        <small class=\"\">{{ noti.created_at }}</small>\n                    </div>\n                    <div class=\"text-secondary\">{{ noti.data.body }}</div>\n                </div>\n            </li>\n        </ul>\n\n    </div>\n</template>\n\n<script>\nimport Axios from '@/services/axios';\n\nexport default {\n    name: 'NotificationsPage',\n    data() {\n        return {\n            page: 1,\n            isFetching: false,\n            notifications: [],\n            filters: {\n                perPage: 10,\n                startdate: '',\n                enddate: '',\n                search: '',\n                selectedStatus: 'read',\n            },\n            statuses: [\n                { text: 'All', value: '' },\n                { text: 'Unread', value: 'unread' },\n                { text: 'Read', value: 'read' },\n            ],\n        }\n    },\n    mounted() {\n        window.addEventListener('scroll', this.handleScroll);\n        this.loadMore();\n    },\n    unmounted() {\n        window.removeEventListener('scroll', this.handleScroll);\n    },\n    watch: {\n        filters: {\n            handler() {\n                console.log('Filters changed');\n                this.page = 1;\n                this.notifications = [];\n                this.loadMore();\n            },\n            deep: true,\n        },\n    },\n    computed: {\n        prefix() {\n            return this.$store.getters['authy/getPrefix'];\n        },\n        getMyDashboard() {\n            let myDashboardRouteName = this.prefix + 'Dashboard';\n            myDashboardRouteName = myDashboardRouteName.charAt(0).toUpperCase() + myDashboardRouteName.slice(1);\n            return myDashboardRouteName;\n        }\n    },\n    methods: {\n        handleScroll() {\n            const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n            if (clientHeight + scrollTop >= scrollHeight - 5) { // Check if near bottom\n                this.loadMore();\n            }\n        },\n        loadMore() {\n            if (this.isFetching)\n                return;\n            this.isFetching = true;\n\n            const params = new URLSearchParams({\n                page: this.page,\n                search: this.filters.search,\n                status: this.filters.selectedStatus,\n                startdate: this.filters.startdate,\n                enddate: this.filters.enddate,\n            });\n            \n            Axios.get(`notifications?${params}&perpage=${this.filters.perPage}`).then(response => {\n                    if (response.data.status === 'ok') {\n                        this.notifications = [...this.notifications, ...response.data.data.data];\n                        this.page++;\n                        this.isFetching = false;\n                    }\n                    else if (response.data.status === 'error') {\n                        this.isFetching = false;\n                        console.log(response.data.message);\n                    }\n                    else {\n                        this.isFetching = false;\n                        console.log('Something went wrong! Please try again');\n                    }\n                }).catch((error) => {\n                    this.isFetching = false;\n                    console.log(error);\n                });\n        },\n        handleFiltersChange(filters) {\n            this.filters = filters;\n        },\n        resetFilters() {\n            this.search = '';\n            this.selectedStatus = '';\n        },\n        takeAction(noti) {\n            const url = noti.data.actionUrl;\n            const [path, query] = url.split('?');\n\n            let basePath = this.prefix === 'brand' ? '/deshigirl' : '/' + this.prefix;\n            let fullPath = basePath + '/' + path;\n\n            if (query) {\n                const queryParams = query.split('&');\n                const queryObj = {};\n                queryParams.forEach(param => {\n                    const [key, value] = param.split('=');\n                    queryObj[key] = value;\n                });\n                this.$router.push({ path: fullPath, query: queryObj });\n            } else {\n                this.$router.push({ path: fullPath });\n            }\n        },\n        getCheckboxId(index, type = 'status') {\n            if (type === 'sortby') {\n                return 'SortBy' + index;\n            } else {\n                return 'Status' + index;\n            }\n        },\n    },\n}\n</script>\n","import { render } from \"./NotificationsPage.vue?vue&type=template&id=0e25e508\"\nimport script from \"./NotificationsPage.vue?vue&type=script&lang=js\"\nexport * from \"./NotificationsPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createStaticVNode","id","for","key","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_component_router_link","to","name","$options","getMyDashboard","default","_withCtx","_hoisted_5","_","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_cache","$event","$data","filters","search","type","placeholder","lazy","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_Fragment","_renderList","statuses","status","statusIndex","getCheckboxId","value","selectedStatus","_hoisted_15","text","_hoisted_16","_hoisted_17","notifications","noti","notiIndex","onClick","takeAction","data","_hoisted_19","_hoisted_20","_hoisted_21","_toDisplayString","title","_hoisted_22","created_at","_hoisted_23","body","_createCommentVNode","_hoisted_18","page","isFetching","perPage","startdate","enddate","mounted","window","addEventListener","this","handleScroll","loadMore","unmounted","removeEventListener","watch","handler","console","log","deep","computed","prefix","$store","getters","myDashboardRouteName","charAt","toUpperCase","slice","methods","scrollTop","scrollHeight","clientHeight","document","documentElement","params","URLSearchParams","Axios","get","then","response","message","catch","error","handleFiltersChange","resetFilters","url","actionUrl","path","query","split","basePath","fullPath","queryParams","queryObj","forEach","param","$router","push","index","__exports__","render"],"sourceRoot":""}