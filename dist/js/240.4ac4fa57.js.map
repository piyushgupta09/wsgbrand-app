{"version":3,"file":"js/240.4ac4fa57.js","mappings":"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","sources":["webpack://wsgbrand-app-v1/./src/modules/factory/pages/purchases/PurchaseOrdersPage.vue","webpack://wsgbrand-app-v1/./src/modules/factory/pages/purchases/PurchaseOrdersPage.vue?66f3"],"sourcesContent":["<template>\n    <div class=\"font-title\">\n        <OrderFilters\n            :title=\"title\"\n            :filters=\"filters\"\n            @order-filter-updated=\"handleFiltersChange\" \n        />\n        <OrderTabs \n            :links=\"links\" \n        />\n        <div v-if=\"Object.keys(filteredOrders).length\">\n            <div v-for=\"(order, orderIndex) in filteredOrders\" :key=\"orderIndex\">\n                <ul class=\"list-group list-group-flush\">\n                    <OrderCard :order=\"order\" type=\"pocard\" />\n                </ul>\n            </div>\n        </div>\n        <EmptyList v-else title=\"No Orders Available, try adjusting filters\" />\n        <OrderDetails :orders=\"filteredOrders\"  :type=\"prefix\" />\n    </div>\n</template>\n\n<script>\nimport Axios from '@/services/axios';\nimport EmptyList from '@/components/EmptyList.vue';\nimport OrderTabs from '@/components/OrderTabs.vue';\nimport OrderCard from '@/components/OrderCard.vue';\nimport OrderFilters from '@/components/OrderFilters.vue';\nimport OrderDetails from '@/components/OrderDetails.vue';\n\nexport default {\n    name: 'PurchaseOrdersPage',\n    components: {\n        OrderTabs,\n        OrderCard,\n        EmptyList,\n        OrderDetails,\n        OrderFilters,\n    },\n    data() {\n        return {\n            title: 'Purchases',\n            page: 1,\n            isFetching: false,\n            orders: [],\n            filters: {\n                search: '',\n                perPage: 10,\n                selectedStatus: 'accepted',\n            },\n            links: [\n                { name: 'FactoryPurchaseOrders', label: 'Orders' },\n                { name: 'FactoryPurchaseBills', label: 'Bills' }\n            ],\n        };\n    },\n    mounted() {\n        this.loadMore();\n        window.addEventListener('scroll', this.handleScroll);\n    },\n    unmounted() {\n        window.removeEventListener('scroll', this.handleScroll);\n    },\n    computed: {\n        prefix() {\n            return this.$store.getters['authy/getPrefix'];\n        },\n        filteredOrders() {\n            let orders = this.orders;\n\n            if (this.filters.search) {\n                const searchTerm = this.filters.search.toLowerCase();\n                orders = orders.filter((order) => {\n                    const orderTags = order.tags.split(',');\n                    return orderTags.some(tag => tag.toLowerCase().includes(searchTerm.trim()));\n                });\n            }\n\n            return orders;\n        },\n        statuses() {\n            return [\n                { text: 'Draft', value: 'draft' },\n                { text: 'Issued', value: 'issued' },\n                { text: 'Partial', value: 'partial' },\n                { text: 'Completed', value: 'completed' },\n                { text: 'Cancelled', value: 'cancelled' },\n            ];\n        },\n    },\n    methods: {\n        handleFiltersChange(filters) {\n            this.filters = filters;\n            this.loadMore();\n        },\n        handleScroll() {\n            const { scrollTop, scrollHeight, clientHeight } = document.documentElement;\n            if (clientHeight + scrollTop >= scrollHeight - 5) { // Check if near bottom\n                this.loadMore();\n            }\n        },\n        loadMore() {\n            if (this.isFetching)\n                return;\n            this.isFetching = true;\n\n            Axios.get(`factory/pos?status=${this.filters.selectedStatus}&perpage=${this.filters.perPage}&page=${this.page}`)\n                .then((response) => {\n                    if (response.data.status === 'ok') {\n                        this.orders = [...this.orders, ...response.data.data.data];\n                        this.page++;\n                        this.isFetching = false;\n                    }\n                    else if (response.data.status === 'error') {\n                        this.isFetching = false;\n                        alert(response.data.message);\n                    }\n                    else {\n                        this.isFetching = false;\n                        alert('Something went wrong! Please try again');\n                    }\n                }).catch((error) => {\n                    this.isFetching = false;\n                    console.log(error);\n                    alert('Something went wrong! Please try again');\n                });\n        },\n    },\n}\n</script>\n  ","import { render } from \"./PurchaseOrdersPage.vue?vue&type=template&id=2254c0c4\"\nimport script from \"./PurchaseOrdersPage.vue?vue&type=script&lang=js\"\nexport * from \"./PurchaseOrdersPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","key","_createElementBlock","_hoisted_1","_createVNode","_component_OrderFilters","title","$data","filters","onOrderFilterUpdated","$options","handleFiltersChange","_component_OrderTabs","links","Object","keys","filteredOrders","length","_hoisted_2","_Fragment","_renderList","order","orderIndex","_createElementVNode","_hoisted_3","_component_OrderCard","type","_createBlock","_component_EmptyList","_component_OrderDetails","orders","prefix","name","components","OrderTabs","OrderCard","EmptyList","OrderDetails","OrderFilters","data","page","isFetching","search","perPage","selectedStatus","label","mounted","this","loadMore","window","addEventListener","handleScroll","unmounted","removeEventListener","computed","$store","getters","searchTerm","toLowerCase","filter","orderTags","tags","split","some","tag","includes","trim","statuses","text","value","methods","scrollTop","scrollHeight","clientHeight","document","documentElement","Axios","get","then","response","status","alert","message","catch","error","console","log","__exports__","render"],"sourceRoot":""}