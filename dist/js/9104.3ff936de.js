"use strict";(self["webpackChunkwsgbrand_app_v1"]=self["webpackChunkwsgbrand_app_v1"]||[]).push([[9104],{9104:function(t,e,a){a.r(e),a.d(e,{default:function(){return _}});var s=a(4108),l=a(7764),i=a(9096);const r={class:"div"},n={class:"navbar navbar-expand py-1 border-bottom"},o={class:"navbar-collapse d-flex align-items-center"},c={class:"d-flex align-items-center"},d=(0,s.QD)("i",{class:"bi bi-chevron-left"},null,-1),h=(0,s.QD)("h6",{class:"mb-0 ms-2"},"All Notifications",-1),u=(0,s.IL)('<ul class="navbar-nav ms-auto align-items-center"><li class="nav-item"><button class="btn fs-5 border-0" data-bs-toggle="collapse" data-bs-target="#offcanvasSearch" aria-expanded="false" aria-controls="offcanvasSearch"><i class="bi bi-search"></i></button></li><li class="nav-item me-3"><button class="btn fs-5 border-0" data-bs-toggle="collapse" data-bs-target="#offcanvasFilter" aria-expanded="false" aria-controls="offcanvasFilter"><i class="bi bi-funnel"></i></button></li></ul>',1),f={class:"collapse",id:"offcanvasSearch"},b={class:"form-floating mx-2 mb-2"},g=(0,s.QD)("label",{for:"floatingInput"},"Search here ...",-1),p={class:"collapse",id:"offcanvasFilter"},v={class:"card card-body"},m=(0,s.QD)("p",{class:"mb-2 fw-bold"},"Filter by status",-1),x={class:"d-flex w-100 border border-end-0"},D=["id","value"],y=["for"],Q={class:"list-group list-group-flush"},w=["onClick"],k={key:0,class:"d-flex flex-column"},S={class:"d-flex align-items-center justify-content-between mb-1"},A={class:"fw-bold"},F={class:""},W={class:"text-secondary"};function C(t,e,a,C,z,M){const P=(0,s.E1)("router-link");return(0,s.Wz)(),(0,s.An)("div",r,[(0,s.QD)("nav",n,[(0,s.QD)("div",o,[(0,s.QD)("div",c,[(0,s.K2)(P,{to:{name:M.getMyDashboard},class:"btn border-0"},{default:(0,s.Ql)((()=>[d])),_:1},8,["to"]),h]),u])]),(0,s.QD)("div",f,[(0,s.QD)("div",b,[(0,s.wt)((0,s.QD)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>z.filters.search=t),type:"search",class:"form-control rounded-0",placeholder:"Search Notifications"},null,512),[[l.Og,z.filters.search,void 0,{lazy:!0}]]),g])]),(0,s.QD)("div",p,[(0,s.QD)("div",v,[m,(0,s.QD)("div",x,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(z.statuses,((t,a)=>((0,s.Wz)(),(0,s.An)("div",{class:"flex-fill border-end",key:a},[(0,s.wt)((0,s.QD)("input",{type:"radio",class:"btn-check",id:"filterby"+M.getCheckboxId(a),value:t.value,"onUpdate:modelValue":e[1]||(e[1]=t=>z.filters.selectedStatus=t),name:"statusFilter"},null,8,D),[[l.sz,z.filters.selectedStatus]]),(0,s.QD)("label",{class:"btn btn-outline-dark rounded-0 border-0 w-100",for:"filterby"+M.getCheckboxId(a)},(0,i.WA)(t.text),9,y)])))),128))])])]),(0,s.QD)("ul",Q,[((0,s.Wz)(!0),(0,s.An)(s.ae,null,(0,s.mi)(z.notifications,((t,e)=>((0,s.Wz)(),(0,s.An)("li",{class:"list-group-item font-title",onClick:e=>M.takeAction(t),key:e},[t&&t.data?((0,s.Wz)(),(0,s.An)("div",k,[(0,s.QD)("div",S,[(0,s.QD)("span",A,(0,i.WA)(t.data.title),1),(0,s.QD)("small",F,(0,i.WA)(t.created_at),1)]),(0,s.QD)("div",W,(0,i.WA)(t.data.body),1)])):(0,s.g1)("",!0)],8,w)))),128))])])}a(3248),a(2168),a(5104),a(8312);var z=a(6376),M={name:"NotificationsPage",data(){return{page:1,isFetching:!1,notifications:[],filters:{perPage:10,startdate:"",enddate:"",search:"",selectedStatus:"read"},statuses:[{text:"All",value:""},{text:"Unread",value:"unread"},{text:"Read",value:"read"}]}},mounted(){window.addEventListener("scroll",this.handleScroll),this.loadMore()},unmounted(){window.removeEventListener("scroll",this.handleScroll)},watch:{filters:{handler(){console.log("Filters changed"),this.page=1,this.notifications=[],this.loadMore()},deep:!0}},computed:{prefix(){return this.$store.getters["authy/getPrefix"]},getMyDashboard(){let t=this.prefix+"Dashboard";return t=t.charAt(0).toUpperCase()+t.slice(1),t}},methods:{handleScroll(){const{scrollTop:t,scrollHeight:e,clientHeight:a}=document.documentElement;a+t>=e-5&&this.loadMore()},loadMore(){if(this.isFetching)return;this.isFetching=!0;const t=new URLSearchParams({page:this.page,search:this.filters.search,status:this.filters.selectedStatus,startdate:this.filters.startdate,enddate:this.filters.enddate});z.c.get(`notifications?${t}&perpage=${this.filters.perPage}`).then((t=>{"ok"===t.data.status?(this.notifications=[...this.notifications,...t.data.data.data],this.page++,this.isFetching=!1):"error"===t.data.status?(this.isFetching=!1,console.log(t.data.message)):(this.isFetching=!1,console.log("Something went wrong! Please try again"))})).catch((t=>{this.isFetching=!1,console.log(t)}))},handleFiltersChange(t){this.filters=t},resetFilters(){this.search="",this.selectedStatus=""},takeAction(t){const e=t.data.actionUrl,[a,s]=e.split("?");let l="brand"===this.prefix?"/deshigirl":"/"+this.prefix,i=l+"/"+a;if(s){const t=s.split("&"),e={};t.forEach((t=>{const[a,s]=t.split("=");e[a]=s})),this.$router.push({path:i,query:e})}else this.$router.push({path:i})},getCheckboxId(t,e="status"){return"sortby"===e?"SortBy"+t:"Status"+t}}},P=a(4100);const U=(0,P.c)(M,[["render",C]]);var _=U}}]);
//# sourceMappingURL=9104.3ff936de.js.map